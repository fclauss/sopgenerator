<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Assembly SOP Generator - Create professional Standard Operating Procedures for manufacturing assembly processes">
    <meta name="keywords" content="SOP, Standard Operating Procedure, Assembly, Manufacturing, Quality">
    <meta name="author" content="Optimal AI">
    <title data-i18n="appTitle">Assembly SOP Generator | Optimal AI</title>
    
    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link" data-i18n="skipToMainContent">Skip to main content</a>
    
    <!-- Header Section -->
    <header class="header" role="banner">
        <div class="header-container">
            <div class="logo-section">
                <h1 class="app-title">
                    <span class="icon" aria-hidden="true">🔧</span>
                    <span data-i18n="appTitle">Assembly SOP Generator</span>
                </h1>
                <p class="app-subtitle" data-i18n="appSubtitle">Streamline your Standard Operating Procedures</p>
            </div>

            <div class="language-selector">
                <select id="language-select" class="language-select" data-i18n-aria-label="selectLanguage" aria-label="Select language">
                    <option value="en">🇺🇸 English</option>
                    <option value="de">🇩🇪 Deutsch</option>
                    <option value="fr">🇫🇷 Français</option>
                </select>
            </div>
            
            <nav class="header-nav" role="navigation" aria-label="Main navigation">
                <button class="nav-toggle" 
                        id="nav-toggle" 
                        aria-expanded="false" 
                        aria-controls="main-nav"
                        aria-label="Toggle navigation menu">
                    <span class="hamburger"></span>
                </button>
                
                <ul class="nav-list" id="main-nav" role="menubar">
                    <li role="none"><a href="#database" class="nav-link nav-link-database" role="menuitem" data-i18n="navDatabase">Database</a></li>
                    <li role="none"><a href="#basic-info" class="nav-link" role="menuitem" data-i18n="navBasicInfo">Basic Info</a></li>
                    <li role="none"><a href="#bom" class="nav-link" role="menuitem" data-i18n="navBOM">BOM</a></li>
                    <li role="none"><a href="#safety" class="nav-link" role="menuitem" data-i18n="navSafety">Safety</a></li>
                    <li role="none"><a href="#assembly" class="nav-link" role="menuitem" data-i18n="navAssembly">Assembly</a></li>
                    <li role="none"><a href="#preview" class="nav-link" role="menuitem" data-i18n="navPreview">Preview</a></li>
                    <li role="none"><button class="nav-link nav-link-company" onclick="showCompanySetup()" role="menuitem" data-i18n="navCompany">⚙️ Company</button></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content Area -->
    <main id="main-content" class="main-content" role="main">
        <div class="container">
            <!-- Progress Indicator -->
            <section class="progress-section" aria-label="Progress indicator">
                <div class="progress-bar">
                    <div class="progress-fill" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="SOP creation progress"></div>
                </div>
                <p class="progress-text"><span data-i18n="progressStep">Step</span> <span id="current-step">1</span> <span data-i18n="progressOf">of</span> <span id="total-steps">5</span></p>
            </section>

            <!-- Form Sections Container -->
            <div class="form-container">
                <!-- Database Management Section (Separate from main flow) -->
                <section id="database" class="form-section database-section" aria-labelledby="database-title">
                    <header class="section-header">
                        <h2 id="database-title" class="section-title">
                            <span class="section-number">DB</span>
                            <span data-i18n="databaseTitle">Manage Your Database</span>
                        </h2>
                        <p class="section-description" data-i18n="databaseDescription">Add items to your database once, reuse across multiple SOPs</p>
                    </header>
                    <div class="section-content">
                        <div class="database-grid">
                            <div class="database-column">
                                <h3 class="database-title" data-i18n="safetyDatabase">Safety Database</h3>
                                <div class="database-items" id="safety-database">
                                    <!-- Database items will be populated dynamically -->
                                </div>
                                <button type="button" class="add-button" data-database="safety">
                                    <span aria-hidden="true">+</span> <span data-i18n="addSafetyItem">Add Safety Item</span>
                                </button>
                            </div>
                            <div class="database-column">
                                <h3 class="database-title" data-i18n="toolsDatabase">Tools Database</h3>
                                <div class="database-items" id="tools-database">
                                    <!-- Database items will be populated dynamically -->
                                </div>
                                <button type="button" class="add-button" data-database="tools">
                                    <span aria-hidden="true">+</span> <span data-i18n="addTool">Add Tool</span>
                                </button>
                            </div>
                            <div class="database-column">
                                <h3 class="database-title" data-i18n="fixturesDatabase">Fixtures Database</h3>
                                <div class="database-items" id="fixtures-database">
                                    <!-- Database items will be populated dynamically -->
                                </div>
                                <button type="button" class="add-button" data-database="fixtures">
                                    <span aria-hidden="true">+</span> <span data-i18n="addFixture">Add Fixture</span>
                                </button>
                            </div>
                        </div>
                        <div class="database-note">
                            <p><strong data-i18n="note">Note:</strong> <span data-i18n="databaseNoteText">The Database section is separate from the main SOP creation flow. Use it to manage reusable items across multiple SOPs.</span></p>
                        </div>
                        
                        <!-- Mock Data Generation Controls -->
                        <div class="mock-data-controls">
                            <h3 class="database-title">🎭 <span data-i18n="testDataTitle">Test Data Generation</span></h3>
                            <p class="mock-data-description" data-i18n="testDataDesc">Generate realistic test data to explore the application functionality</p>
                            <div class="mock-data-buttons">
                                <button type="button" class="button button--primary" id="generate-full-mock-data">
                                    <span aria-hidden="true">🎯</span> Generate Full Test Data
                                </button>
                                <button type="button" class="button button--danger" id="clear-all-data">
                                    <span aria-hidden="true">🗑️</span> Clear All Data
                                </button>
                            </div>
                            <div class="storage-info" id="storage-info">
                                <!-- Storage information will be displayed here -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 1: Basic Information -->
                <section id="basic-info" class="form-section active" aria-labelledby="basic-info-title">
                    <header class="section-header">
                        <h2 id="basic-info-title" class="section-title">
                            <span class="section-number">1</span>
                            <span data-i18n="basicInfoTitle">Basic Information</span>
                        </h2>
                        <p class="section-description" data-i18n="basicInfoDescription">Enter the fundamental details for your SOP document</p>
                    </header>
                    <div class="section-content">
                        <form class="basic-info-form" id="basic-info-form">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="sop-title" class="form-label required" data-i18n="sopTitleLabel">SOP Title</label>
                                    <input 
                                        type="text" 
                                        id="sop-title" 
                                        name="title"
                                        class="form-input" 
                                        placeholder="Enter the SOP title (e.g., 'Widget Assembly Process')"
                                        required
                                        aria-describedby="sop-title-help"
                                    >
                                    <small id="sop-title-help" class="form-help">A clear, descriptive title for this Standard Operating Procedure</small>
                                    <div class="form-error" id="sop-title-error" aria-live="polite"></div>
                                </div>

                                <div class="form-group">
                                    <label for="part-number" class="form-label required">Part Number</label>
                                    <input 
                                        type="text" 
                                        id="part-number" 
                                        name="partNumber"
                                        class="form-input" 
                                        placeholder="Enter part number (e.g., 'WDG-001-A')"
                                        required
                                        aria-describedby="part-number-help"
                                    >
                                    <small id="part-number-help" class="form-help">Unique identifier for the part or assembly</small>
                                    <div class="form-error" id="part-number-error" aria-live="polite"></div>
                                </div>

                                <div class="form-group">
                                    <label for="revision" class="form-label">Revision</label>
                                    <input 
                                        type="text" 
                                        id="revision" 
                                        name="revision"
                                        class="form-input" 
                                        placeholder="A"
                                        value="A"
                                        maxlength="10"
                                        aria-describedby="revision-help"
                                    >
                                    <small id="revision-help" class="form-help">Document revision level (e.g., A, B, C or 1.0, 1.1)</small>
                                    <div class="form-error" id="revision-error" aria-live="polite"></div>
                                </div>

                                <div class="form-group">
                                    <label for="author" class="form-label required">Author</label>
                                    <input 
                                        type="text" 
                                        id="author" 
                                        name="author"
                                        class="form-input" 
                                        placeholder="Enter author name"
                                        required
                                        aria-describedby="author-help"
                                    >
                                    <small id="author-help" class="form-help">Person responsible for creating this SOP</small>
                                    <div class="form-error" id="author-error" aria-live="polite"></div>
                                </div>

                                <div class="form-group">
                                    <label for="department" class="form-label">Department</label>
                                    <input 
                                        type="text" 
                                        id="department" 
                                        name="department"
                                        class="form-input" 
                                        placeholder="Enter department (e.g., 'Manufacturing', 'Assembly')"
                                        aria-describedby="department-help"
                                    >
                                    <small id="department-help" class="form-help">Department or team responsible for this process</small>
                                    <div class="form-error" id="department-error" aria-live="polite"></div>
                                </div>

                                <div class="form-group">
                                    <label for="approver" class="form-label">Approver</label>
                                    <input 
                                        type="text" 
                                        id="approver" 
                                        name="approver"
                                        class="form-input" 
                                        placeholder="Enter approver name"
                                        aria-describedby="approver-help"
                                    >
                                    <small id="approver-help" class="form-help">Person who approved this SOP for use</small>
                                    <div class="form-error" id="approver-error" aria-live="polite"></div>
                                </div>

                                <div class="form-group">
                                    <label for="effective-date" class="form-label">Effective Date</label>
                                    <input 
                                        type="date" 
                                        id="effective-date" 
                                        name="effectiveDate"
                                        class="form-input" 
                                        aria-describedby="effective-date-help"
                                    >
                                    <small id="effective-date-help" class="form-help">Date when this SOP becomes effective</small>
                                    <div class="form-error" id="effective-date-error" aria-live="polite"></div>
                                </div>

                                <div class="form-group form-group--full">
                                    <label for="notes" class="form-label">General Notes</label>
                                    <textarea 
                                        id="notes" 
                                        name="notes"
                                        class="form-textarea" 
                                        placeholder="Enter any general notes, special instructions, or additional information about this SOP..."
                                        rows="4"
                                        aria-describedby="notes-help"
                                    ></textarea>
                                    <small id="notes-help" class="form-help">Optional notes or special instructions for this SOP</small>
                                    <div class="form-error" id="notes-error" aria-live="polite"></div>
                                </div>
                            </div>
                        </form>
                    </div>
                </section>

                <!-- Section 2: Bill of Materials -->
                <section id="bom" class="form-section" aria-labelledby="bom-title">
                    <header class="section-header">
                        <h2 id="bom-title" class="section-title">
                            <span class="section-number">2</span>
                            <span data-i18n="bomTitle">Bill of Materials</span>
                        </h2>
                        <p class="section-description" data-i18n="bomDescription">Define all parts and components needed for this assembly</p>
                    </header>
                    <div class="section-content">
                        <div class="database-column">
                            <h3 class="database-title" data-i18n="availableParts">Available Parts</h3>
                            <div class="database-items" id="parts-database">
                                <!-- Parts from database will be displayed here -->
                            </div>
                            <button type="button" class="add-button" data-database="parts">
                                <span aria-hidden="true">+</span> <span data-i18n="addNewPart">Add New Part</span>
                            </button>
                        </div>
                        
                        <div class="bom-container" id="bom-container">
                            <!-- BOM items will be added dynamically -->
                        </div>
                        <button type="button" class="add-button" id="add-bom-item">
                            <span aria-hidden="true">+</span> Add BOM Item
                        </button>
                    </div>
                </section>

                <!-- Section 3: Safety Requirements -->
                <section id="safety" class="form-section" aria-labelledby="safety-title">
                    <header class="section-header">
                        <h2 id="safety-title" class="section-title">
                            <span class="section-number">3</span>
                            <span data-i18n="safetyTitle">Safety Requirements</span>
                        </h2>
                        <p class="section-description" data-i18n="safetyDescription">Define general safety precautions and requirements for this SOP</p>
                    </header>
                    <div class="section-content">
                        <div class="safety-grid">
                            <!-- Safety pictograms will be added here -->
                        </div>
                        <div class="safety-notes">
                            <label for="safety-notes-textarea" class="form-label" data-i18n="generalSafetyNotes">General Safety Notes</label>
                            <textarea
                                id="safety-notes-textarea"
                                class="form-textarea"
                                data-i18n="safetyNotesPlaceholder"
                                placeholder="Describe general safety precautions for this assembly process..."
                                rows="4"
                            ></textarea>
                        </div>
                        <div class="safety-selection">
                            <label for="safety-selector" class="form-label" data-i18n="addSafetyFromDatabase">Add Safety Items from Database</label>
                            <select id="safety-selector" class="tool-selector">
                                <option value="" data-i18n="selectSafetyItem">Select safety item to add...</option>
                                <!-- Options will be populated from safety database -->
                            </select>
                        </div>
                        <div class="selected-safety" id="selected-safety">
                            <!-- Selected safety items will be displayed here -->
                        </div>
                    </div>
                </section>

                <!-- Section 4: Assembly Sequence -->
                <section id="assembly" class="form-section" aria-labelledby="assembly-title">
                    <header class="section-header">
                        <h2 id="assembly-title" class="section-title">
                            <span class="section-number">4</span>
                            <span data-i18n="assemblyTitle">Assembly Sequence</span>
                        </h2>
                        <p class="section-description" data-i18n="assemblyDescription">Document the step-by-step assembly process with tools, fixtures, parts, and safety for each step</p>
                    </header>
                    <div class="section-content">
                        <div class="assembly-steps" id="assembly-steps">
                            <!-- Assembly steps will be added dynamically -->
                        </div>
                        <button type="button" class="add-button" id="add-assembly-step">
                            <span aria-hidden="true">+</span> <span data-i18n="addAssemblyStep">Add Assembly Step</span>
                        </button>
                    </div>
                </section>

                <!-- Section 5: Preview (Final step) -->
                <section id="preview-section" class="form-section" aria-labelledby="preview-section-title">
                    <header class="section-header">
                        <h2 id="preview-section-title" class="section-title">
                            <span class="section-number">5</span>
                            <span data-i18n="previewTitle">Preview & Generate</span>
                        </h2>
                        <p class="section-description" data-i18n="previewDescription">Review your SOP and generate the final document</p>
                    </header>
                    <div class="section-content">
                        <div class="preview-summary">
                            <p data-i18n="previewSummary">Review all sections and click "Generate SOP" to create your final document.</p>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Navigation Controls -->
            <div class="navigation-controls">
                <button class="nav-button" id="prev-section" disabled>
                    <span aria-hidden="true">←</span>
                    <span data-i18n="previous">Previous</span>
                </button>

                <button class="generate-button" id="generate-sop">
                    <span aria-hidden="true">📄</span>
                    <span data-i18n="generateSOP">Generate SOP</span>
                </button>

                <button class="nav-button" id="next-section">
                    <span data-i18n="next">Next</span>
                    <span aria-hidden="true">→</span>
                </button>
            </div>
        </div>
    </main>

    <!-- Preview Panel -->
    <aside class="preview-panel" id="preview-panel" role="complementary" aria-label="SOP Preview">
        <header class="preview-header">
            <h2 class="preview-title" data-i18n="sopPreviewTitle">SOP Preview</h2>
            <button class="close-preview" 
                    id="preview-toggle" 
                    aria-label="Close preview panel"
                    aria-expanded="false">
                <span aria-hidden="true">×</span>
            </button>
        </header>
        
        <div class="preview-content" id="preview-content">
            <div class="preview-placeholder">
                <p data-i18n="previewPlaceholder1">Your SOP preview will appear here as you complete each section.</p>
                <p data-i18n="previewPlaceholder2">Click "Generate SOP" to create the final document.</p>
            </div>
        </div>
    </aside>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="footer-content">
            <p>&copy; 2024 Optimal AI. <span data-i18n="footerText">Assembly SOP Generator</span> - <span class="current-date"></span></p>
        </div>
    </footer>

    <!-- Modals and Overlays -->
    <div class="modal-overlay" id="modal-overlay" aria-hidden="true">
        <div class="modal" role="dialog" aria-labelledby="modal-title" aria-describedby="modal-description">
            <header class="modal-header">
                <h3 id="modal-title" class="modal-title"></h3>
                <button type="button" class="modal-close" aria-label="Close modal">
                    <span aria-hidden="true">×</span>
                </button>
            </header>
            <div class="modal-body">
                <p id="modal-description" class="modal-description"></p>
                <div id="modal-content" class="modal-content"></div>
            </div>
            <footer class="modal-footer">
                <button type="button" class="button button--secondary" id="modal-cancel" data-i18n="cancel">Cancel</button>
                <button type="button" class="button button--primary" id="modal-confirm" data-i18n="confirm">Confirm</button>
            </footer>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div class="loading-overlay" id="loading-overlay" aria-hidden="true">
        <div class="loading-spinner" role="status" aria-label="Loading">
            <span class="sr-only" data-i18n="loading">Loading...</span>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/i18n.js"></script>
    <script src="js/app.js" defer></script>
</body>
</html> 